(this["webpackJsonpreact-staff-orders-app"]=this["webpackJsonpreact-staff-orders-app"]||[]).push([[0],{49:function(t,e,r){},76:function(t,e,r){"use strict";r.r(e);var a,n=r(0),c=r.n(n),o=r(15),s=r.n(o),l=(r(49),r(13)),i=r(6),d=["title","titleId"];function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}function h(t,e){if(null==t)return{};var r,a,n=function(t,e){if(null==t)return{};var r,a,n={},c=Object.keys(t);for(a=0;a<c.length;a++)r=c[a],e.indexOf(r)>=0||(n[r]=t[r]);return n}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(a=0;a<c.length;a++)r=c[a],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function j(t,e){var r=t.title,c=t.titleId,o=h(t,d);return n.createElement("svg",u({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"bi bi-cart-fill",viewBox:"0 0 16 16",ref:e,"aria-labelledby":c},o),r?n.createElement("title",{id:c},r):null,a||(a=n.createElement("path",{d:"M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"})))}var f=n.forwardRef(j),b=(r.p,r(1));var O=Object(i.f)((function(t){return Object(b.jsx)("div",{className:"navigation",children:Object(b.jsx)("nav",{class:"navbar navbar-expand navbar-dark bg-dark",children:Object(b.jsxs)("div",{class:"container",children:[Object(b.jsxs)(l.b,{class:"navbar-brand",to:"/",children:["Staff Orders - Staff: ",JSON.parse(localStorage.getItem("Staff"))]}),Object(b.jsx)("div",{children:Object(b.jsxs)("ul",{class:"navbar-nav ml-auto",children:[Object(b.jsx)("li",{class:"nav-item  ".concat("/"===t.location.pathname?"active":""),children:Object(b.jsx)(l.b,{class:"nav-link",to:"/",children:"Home"})}),Object(b.jsx)("li",{class:"nav-item  ".concat("/products"===t.location.pathname?"active":""),children:Object(b.jsx)(l.b,{class:"nav-link",to:"/products",children:"Products"})}),Object(b.jsx)("li",{class:"nav-item  ".concat("/cart"===t.location.pathname?"active":""),children:Object(b.jsxs)(l.b,{class:"nav-link",to:"/cart",children:[Object(b.jsx)(f,{className:"logo"})," Cart"]})})]})})]})})})}));var p,v=function(){return Object(b.jsx)("container",{children:Object(b.jsx)("div",{className:"footer",children:Object(b.jsx)("footer",{class:"page-footer py-1 bg-dark fixed-bottom",children:Object(b.jsx)("div",{class:"container text-center text-md-left",children:Object(b.jsx)("p",{class:"m-0 text-center text-white",children:"Copyright \xa9 Kimone Kuppasamy 2021"})})})})})},m=r(18),g=r(19),x=r(10),y=r(22),S=r(20),w=r(42),I=r.n(w).a.create({baseURL:"http://localhost:61393/api"}),D=r(17),N=r(23),C=r(44),k=r(43),P=r(21),M=r(16),E=["title","titleId"];function z(){return(z=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}function T(t,e){if(null==t)return{};var r,a,n=function(t,e){if(null==t)return{};var r,a,n={},c=Object.keys(t);for(a=0;a<c.length;a++)r=c[a],e.indexOf(r)>=0||(n[r]=t[r]);return n}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(a=0;a<c.length;a++)r=c[a],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function H(t,e){var r=t.title,a=t.titleId,c=T(t,E);return n.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"bi bi-cart-plus-fill",viewBox:"0 0 16 16",ref:e,"aria-labelledby":a},c),r?n.createElement("title",{id:a},r):null,p||(p=n.createElement("path",{d:"M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM9 5.5V7h1.5a.5.5 0 0 1 0 1H9v1.5a.5.5 0 0 1-1 0V8H6.5a.5.5 0 0 1 0-1H8V5.5a.5.5 0 0 1 1 0z"})))}var J=n.forwardRef(H),Q=(r.p,function(t){Object(y.a)(r,t);var e=Object(S.a)(r);function r(t){var a;return Object(m.a)(this,r),(a=e.call(this,t)).state={products:[],offset:0,data:[],perPage:5,currentPage:0,val:"1"},a.addToCart=a.addToCart.bind(Object(x.a)(a)),a}return Object(g.a)(r,[{key:"updateProductQuan",value:function(t,e,r){var a=r-e;I.put("/OrdersProduct/"+t,{productQuanitity:a}).then((function(t){console.log("Status: ",t.status),console.log("Data: ",t.data)})).catch((function(t){console.error("Something went wrong!",t)}))}},{key:"addToCart",value:function(t,e){var r=new Date,a=JSON.parse(localStorage.getItem("Staff")),n=JSON.parse(t),c=JSON.parse(localStorage.getItem("OrderNum")),o=JSON.parse(this.state.val);if(!c){var s=Math.floor(1e3*Math.random())+1;localStorage.setItem("OrderNum",s),c=JSON.parse(s)}if(a){var l={orderNumber:c,staffID:a,productID:n,orderQuantity:o,orderDate:r,orderStatus:""};I.post("/OrdersCart",l).then((function(t){console.log(t),console.log(t.data),alert("Product added to cart"),window.location.reload(!1)})).catch((function(t){alert("Something went wrong! "+t)}))}else alert("Please Login First")}},{key:"preventKeyboardInput",value:function(t){t.preventDefault()}},{key:"componentDidMount",value:function(){var t=this;I.get("/OrdersProduct").then((function(e){if(Object.keys(e.data).length){var r=e.data;t.setState({products:r})}else console.log("no data found")}))}},{key:"render",value:function(){var t=this;return Object(b.jsx)("div",{class:"overflow-auto",children:Object(b.jsx)(k.a,{children:Object(b.jsx)(C.a,{xs:1,md:4,className:"g-4",children:this.state.products.map((function(e){return Object(b.jsx)(N.a,{children:Object(b.jsxs)(D.a,{children:[Object(b.jsx)(D.a.Img,{class:"img-responsive",variant:"top",src:e.productImage}),Object(b.jsxs)(D.a.Body,{children:[Object(b.jsx)(D.a.Title,{children:e.productTitle}),Object(b.jsxs)(D.a.Text,{children:["Decription: ",e.productDescription]}),Object(b.jsxs)(D.a.Text,{children:["Price: R",e.productPrice]}),Object(b.jsx)(M.a,{children:Object(b.jsxs)(M.a.Group,{className:"mb-3",children:[Object(b.jsx)(M.a.Label,{children:"Quantity"}),Object(b.jsx)(M.a.Control,{type:"number",min:"1",max:e.productQuanitity,onKeyDown:function(t){t.preventDefault()},defaultValue:"1",id:"quantity",onChange:function(e){return t.setState({val:e.target.value})}})]})}),Object(b.jsxs)(P.a,{onClick:function(r){return t.addToCart(e.productID,e.productQuanitity)},children:[Object(b.jsx)(J,{className:"logo"})," Add To Cart"]})]})]})})}))})})})}}]),r}(c.a.Component)),A=Object(b.jsx)(Q,{});s.a.render(A,document.getElementById("root"));var L=Q,B=r(25),V=r(24),F=function(t){Object(y.a)(r,t);var e=Object(S.a)(r);function r(t){var a;return Object(m.a)(this,r),(a=e.call(this,t)).state={staff:[],orders:[],order:"",id:"1",showDetails:!1,ordsDetails:[]},a.handleSubmit=a.handleSubmit.bind(Object(x.a)(a)),a.handleChange=a.handleChange.bind(Object(x.a)(a)),a.getOrder=a.getOrder.bind(Object(x.a)(a)),a}return Object(g.a)(r,[{key:"handleChange",value:function(t){this.setState({id:t.target.value}),this.setState({showDetails:!0}),this.getAllOrders(),alert(this.state.id)}},{key:"handleSubmit",value:function(){var t=this.state.id;localStorage.setItem("Staff",t),this.getOrder(),this.props.history.push("/Products")}},{key:"getOrder",value:function(){var t=this;I.get("/OrdersCart").then((function(e){if(Object.keys(e.data).length){var r=e.data;t.setState({orders:r});var a,n=[],c=0,o=0,s=Object(B.a)(r);try{for(s.s();!(a=s.n()).done;){var l=a.value;l.staffID===JSON.parse(localStorage.getItem("Staff"))&&""===l.orderStatus&&(c++,n.push(l.orderNumber))}}catch(i){s.e(i)}finally{s.f()}c>0&&(o=Math.max.apply(null,n),localStorage.setItem("OrderNum",o))}else console.log("no data found")}))}},{key:"componentDidMount",value:function(){var t=this;I.get("/OrdersStaff").then((function(e){var r=e.data;t.setState({staff:r})})),this.getOrder()}},{key:"getAllOrders",value:function(){var t=this;I.get("/Orders").then((function(e){var r=e.data;t.setState({ordsDetails:r})}))}},{key:"render",value:function(){var t=this;return Object(b.jsxs)("container",{children:[Object(b.jsx)("div",{children:Object(b.jsxs)(M.a,{className:"text-center",children:[Object(b.jsx)("h4",{class:"mb-3",for:"staff",children:"Login in as: "}),Object(b.jsxs)("select",{id:"staff",defaultValue:"1",onChange:this.handleChange,class:"form-control text-center",required:!0,children:[this.state.staff.map((function(t){return Object(b.jsxs)("option",{class:"form-control",name:"staff",value:t.staffID,children:[t.staffID," - ",t.staffFName," ",t.staffLName]})})),";"]}),Object(b.jsx)(P.a,{onClick:function(e){return t.handleSubmit()},children:"Login"})]})}),Object(b.jsx)("div",{children:this.state.showDetails&&Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{children:"Previous Orders"}),Object(b.jsxs)(V.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"#"}),Object(b.jsx)("th",{children:"Product"}),Object(b.jsx)("th",{children:"Quantity"}),Object(b.jsx)("th",{children:"Order Date"}),Object(b.jsx)("th",{})]})}),Object(b.jsx)("tbody",{children:this.state.ordsDetails.filter((function(e){return e.staffID===JSON.parse(t.state.id)&&"Y"===e.orderStatus})).map((function(e){return Object(b.jsxs)("tr",{name:"orderID",children:[Object(b.jsx)("td",{children:e.orderNumber}),Object(b.jsx)("td",{children:t.state.products.filter((function(t){return t.productID===e.productID})).map((function(t){return Object(b.jsxs)("td",{children:[t.productTitle," - ",t.productDescription]})}))}),Object(b.jsx)("td",{children:e.orderQuantity}),Object(b.jsx)("td",{children:e.orderDate})]},e.orderID)}))})]})]})})]})}}]),r}(c.a.Component),R=Object(b.jsx)(F,{});s.a.render(R,document.getElementById("root"));var K,q=Object(i.f)(F),Y=["title","titleId"];function G(){return(G=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}function U(t,e){if(null==t)return{};var r,a,n=function(t,e){if(null==t)return{};var r,a,n={},c=Object.keys(t);for(a=0;a<c.length;a++)r=c[a],e.indexOf(r)>=0||(n[r]=t[r]);return n}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(a=0;a<c.length;a++)r=c[a],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function W(t,e){var r=t.title,a=t.titleId,c=U(t,Y);return n.createElement("svg",G({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"bi bi-trash-fill",viewBox:"0 0 16 16",ref:e,"aria-labelledby":a},c),r?n.createElement("title",{id:a},r):null,K||(K=n.createElement("path",{d:"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"})))}var X=n.forwardRef(W),Z=(r.p,function(t){Object(y.a)(r,t);var e=Object(S.a)(r);function r(t){var a;return Object(m.a)(this,r),(a=e.call(this,t)).state={orders:[],order:"",products:[]},a.placeOrder=a.placeOrder.bind(Object(x.a)(a)),a.deleteItem=a.deleteItem.bind(Object(x.a)(a)),a.componentDidMount=a.componentDidMount.bind(Object(x.a)(a)),a}return Object(g.a)(r,[{key:"deleteItem",value:function(t){var e=this,r=JSON.parse(localStorage.getItem("OrderNum"));I.delete("/OrdersCart/".concat(t)).then((function(a){console.log(a),console.log(a.data);var n=e.state.orders.filter((function(e){return e.id!==t}));e.setState({orders:n}),I.get("/OrdersCart").then((function(t){Object.keys(t.data).length?0===t.data.filter((function(t){return t.orderNumber==r&&""===t.orderStatus})).length?(window.localStorage.removeItem("OrderNum"),alert("Cart is Empty"),e.props.history.push("/Products")):(alert("Item Deleted"),window.location.reload(!1)):console.log("Cart is empty")})).catch((function(r){e.setState({errorMessage:r.message}),alert("There was an error! - "+r+"/OrdersCart/".concat(t))}))})).catch((function(r){e.setState({errorMessage:r.message}),alert("There was an error! - "+r+"/OrdersCart/".concat(t))}))}},{key:"placeOrder",value:function(){var t=this,e={orderStatus:"Y"};I.get("/OrdersCart").then((function(r){if(Object.keys(r.data).length){var a=r.data;t.setState({orders:a});var n,c=0,o=Object(B.a)(a);try{for(o.s();!(n=o.n()).done;){var s=n.value;s.orderNumber==JSON.parse(localStorage.getItem("OrderNum"))&&""===s.orderStatus&&(c++,I.put("/OrdersCart/"+s.orderID,e).then((function(t){console.log("Status: ",t.status),console.log("Data: ",t.data)})).catch((function(t){console.error("Something went wrong!",t)})))}}catch(l){o.e(l)}finally{o.f()}c>=1&&(alert("Order Placed"),window.localStorage.removeItem("OrderNum"),t.props.history.push("/Products"))}else console.log("Cart is empty")}))}},{key:"getProductInfo",value:function(){var t=this;I.get("/OrdersProduct").then((function(e){if(Object.keys(e.data).length){var r=e.data;t.setState({products:r})}else console.log("no data found")}))}},{key:"componentDidMount",value:function(){var t=this;I.get("/OrdersCart").then((function(e){if(Object.keys(e.data).length){var r=e.data.filter((function(t){return t.orderNumber==JSON.parse(localStorage.getItem("OrderNum"))&&""===t.orderStatus}));t.setState({orders:r})}else console.log("Cart is empty")})),this.getProductInfo()}},{key:"render",value:function(){var t=this;return Object(b.jsxs)("div",{class:"table-responsive",children:[Object(b.jsxs)("h3",{children:["Order Number: ",JSON.parse(localStorage.getItem("OrderNum"))]}),Object(b.jsxs)(V.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Product"}),Object(b.jsx)("th",{children:"Quantity"}),Object(b.jsx)("th",{})]})}),Object(b.jsx)("tbody",{children:this.state.orders.map((function(e){return Object(b.jsxs)("tr",{name:"orderID",children:[Object(b.jsx)("td",{children:t.state.products.filter((function(t){return t.productID===e.productID})).map((function(t){return Object(b.jsxs)("td",{children:[t.productTitle," - ",t.productDescription," - R ",t.productPrice," x ",e.orderQuantity]})}))}),Object(b.jsx)("td",{children:e.orderQuantity}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{onClick:function(r){return t.deleteItem(e.orderID)},children:Object(b.jsx)(X,{className:"logo"})})})]},e.orderID)}))})]}),Object(b.jsx)(P.a,{onClick:function(e){return t.placeOrder()},children:"Place Order"})]})}}]),r}(c.a.Component)),$=Object(b.jsx)(Z,{});s.a.render($,document.getElementById("root"));var _=Object(i.f)(Z);var tt=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)(l.a,{children:[Object(b.jsx)(O,{}),Object(b.jsxs)(i.c,{children:[Object(b.jsx)(i.a,{path:"/",exact:!0,component:function(){return Object(b.jsx)(q,{})}}),Object(b.jsx)(i.a,{path:"/Products",exact:!0,component:function(){return Object(b.jsx)(L,{})}}),Object(b.jsx)(i.a,{path:"/Cart",exact:!0,component:function(){return Object(b.jsx)(_,{})}})]}),Object(b.jsx)(v,{})]})})},et=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,77)).then((function(e){var r=e.getCLS,a=e.getFID,n=e.getFCP,c=e.getLCP,o=e.getTTFB;r(t),a(t),n(t),c(t),o(t)}))};r(75);s.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(tt,{})}),document.getElementById("root")),et()}},[[76,1,2]]]);
//# sourceMappingURL=main.d08553e8.chunk.js.map